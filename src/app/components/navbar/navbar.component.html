<nav
  class="bg-white w-full flex relative justify-between items-center mx-auto px-8 h-20"
>
  <div class="inline-flex">
    <a class="_o6689fn" href="/"
      ><div class="hidden md:flex items-center justify-center gap-2">
        <img
          src="/src/assets/images/logo.png"
          alt="NuwaRecycle Logo"
          width="50"
        />
        <strong class="font-geist text-xl sm:text-base">NuwaRecycle</strong>
      </div>
      <div class="block md:hidden">
        <img
          src="/src/assets/images/logo.png"
          alt="NuwaRecycle Logo"
          width="50"
        />
      </div>
    </a>
  </div>
  <div class="hidden sm:block flex-shrink flex-grow-0 justify-start px-2">
    <div class="inline-block">
      <div class="inline-flex items-center max-w-full relative">   
        <li class="pi pi-search absolute ml-4"></li>     
        <p-autoComplete
          placeholder="Search"
          [required]="true"
          [(ngModel)]="selectedProduct"
          [suggestions]="filteredProds"     
          (completeMethod)="filterProducts($event)"   
          (onSelect)="redirectToProduct()"  
          field="name"
          ngClass="ng-autocomplete block w-[40vw] p-2.5 pl-10 text-sm text-gray-900 border border-gray-300 bg-gray-50 focus:ring-blue-500 focus:border-blue-500 rounded-full"
        >        
        <ng-template let-product pTemplate="item">
          <div class="flex items-center gap-2">
              <img src="{{product.image1}}" style="width: 58px"/>
              <div>{{ product.name }}</div>
          </div>
      </ng-template>
      </p-autoComplete>
      </div>
    </div>
  </div>

  <div class="flex-initial">
    <div class="flex justify-end items-center relative">
      <div class="flex mr-4 items-center">
        <div class="block relative">
          <button
            type="button"
            class="inline-block py-2 px-3 hover:bg-gray-200 rounded-full relative"
          >
            <div class="flex items-center h-5">
              <button (click)="likedVisible = true">
                <li class="pi pi-heart text-lg"></li>              
              </button>                            
            </div>
          </button>
        </div>
        <div class="block relative">
          <p-button
            type="button"
            class="inline-block py-2 px-3 hover:bg-gray-200 rounded-full relative"
            (click)="showDialog()"
            [badge]="badge$"
          >
            <div class="flex items-center h-5">
              <div class="_xpkakx">
                <li class="pi pi-shopping-cart text-lg"></li>
              </div>
            </div>
          </p-button>
        </div>
      </div>

      <button (click)="sidebarVisible = true">
        <li class="pi pi-bars text-lg"></li>
      </button>
      
      <button (click)="menu.toggle($event)" class="ml-6">
        <p-avatar [icon]="cookie.get('Bearer') != '' ? cookie.get('profileImg') : 'pi pi-user'"></p-avatar>
      </button>
    </div>
  </div>
</nav>

<div class="card flex justify-content-center">
  <p-sidebar [(visible)]="sidebarVisible">
    <ng-template pTemplate="header">
      <header class="flex items-center justify-center h-14 border-b w-full">
        <div class="inline-flex w-full">
          <a class="_o6689fn" href="/"
            ><div class="hidden md:flex items-center justify-center gap-2">
              <img
                src="/src/assets/images/logo.png"
                alt="NuwaRecycle Logo"
                width="50"
              />
              <strong class="font-geist text-xl sm:text-base"
                >NuwaRecycle</strong
              >
            </div>
            <div class="block md:hidden">
              <img
                src="/src/assets/images/logo.png"
                alt="NuwaRecycle Logo"
                width="50"
              />
            </div>
          </a>
        </div>
      </header>
    </ng-template>
    <ng-template pTemplate="content">
      <div class="overflow-y-auto overflow-x-hidden flex-grow">
        <ul class="flex flex-col py-4 space-y-1">
          <li class="px-5">
            <div class="flex flex-row items-center h-8">
              <div class="text-sm font-light tracking-wide text-gray-500">
                Menu
              </div>
            </div>
          </li>
          <li>
            <a
              href="#"
              class="relative flex flex-row items-center h-11 focus:outline-none hover:bg-gray-50 text-gray-600 hover:text-gray-800 border-l-4 border-transparent hover:border-indigo-500 pr-6"
            >
              <span class="inline-flex justify-center items-center ml-4">
                <svg
                  class="w-5 h-5"
                  fill="none"
                  stroke="currentColor"
                  viewBox="0 0 24 24"
                  xmlns="http://www.w3.org/2000/svg"
                >
                  <path
                    stroke-linecap="round"
                    stroke-linejoin="round"
                    stroke-width="2"
                    d="M3 12l2-2m0 0l7-7 7 7M5 10v10a1 1 0 001 1h3m10-11l2 2m-2-2v10a1 1 0 01-1 1h-3m-6 0a1 1 0 001-1v-4a1 1 0 011-1h2a1 1 0 011 1v4a1 1 0 001 1m-6 0h6"
                  ></path>
                </svg>
              </span>
              <span class="ml-2 text-sm tracking-wide truncate">Dashboard</span>
            </a>
          </li>
          <li>
            <a
              href="#"
              class="relative flex flex-row items-center h-11 focus:outline-none hover:bg-gray-50 text-gray-600 hover:text-gray-800 border-l-4 border-transparent hover:border-indigo-500 pr-6"
            >
              <span class="inline-flex justify-center items-center ml-4">
                <svg
                  class="w-5 h-5"
                  fill="none"
                  stroke="currentColor"
                  viewBox="0 0 24 24"
                  xmlns="http://www.w3.org/2000/svg"
                >
                  <path
                    stroke-linecap="round"
                    stroke-linejoin="round"
                    stroke-width="2"
                    d="M20 13V6a2 2 0 00-2-2H6a2 2 0 00-2 2v7m16 0v5a2 2 0 01-2 2H6a2 2 0 01-2-2v-5m16 0h-2.586a1 1 0 00-.707.293l-2.414 2.414a1 1 0 01-.707.293h-3.172a1 1 0 01-.707-.293l-2.414-2.414A1 1 0 006.586 13H4"
                  ></path>
                </svg>
              </span>
              <span class="ml-2 text-sm tracking-wide truncate">Inbox</span>
              <span
                class="px-2 py-0.5 ml-auto text-xs font-medium tracking-wide text-indigo-500 bg-indigo-50 rounded-full"
                >New</span
              >
            </a>
          </li>
          <li>
            <a
              href="#"
              class="relative flex flex-row items-center h-11 focus:outline-none hover:bg-gray-50 text-gray-600 hover:text-gray-800 border-l-4 border-transparent hover:border-indigo-500 pr-6"
            >
              <span class="inline-flex justify-center items-center ml-4">
                <svg
                  class="w-5 h-5"
                  fill="none"
                  stroke="currentColor"
                  viewBox="0 0 24 24"
                  xmlns="http://www.w3.org/2000/svg"
                >
                  <path
                    stroke-linecap="round"
                    stroke-linejoin="round"
                    stroke-width="2"
                    d="M7 8h10M7 12h4m1 8l-4-4H5a2 2 0 01-2-2V6a2 2 0 012-2h14a2 2 0 012 2v8a2 2 0 01-2 2h-3l-4 4z"
                  ></path>
                </svg>
              </span>
              <span class="ml-2 text-sm tracking-wide truncate">Messages</span>
            </a>
          </li>
          <li>
            <a
              href="#"
              class="relative flex flex-row items-center h-11 focus:outline-none hover:bg-gray-50 text-gray-600 hover:text-gray-800 border-l-4 border-transparent hover:border-indigo-500 pr-6"
            >
              <span class="inline-flex justify-center items-center ml-4">
                <svg
                  class="w-5 h-5"
                  fill="none"
                  stroke="currentColor"
                  viewBox="0 0 24 24"
                  xmlns="http://www.w3.org/2000/svg"
                >
                  <path
                    stroke-linecap="round"
                    stroke-linejoin="round"
                    stroke-width="2"
                    d="M15 17h5l-1.405-1.405A2.032 2.032 0 0118 14.158V11a6.002 6.002 0 00-4-5.659V5a2 2 0 10-4 0v.341C7.67 6.165 6 8.388 6 11v3.159c0 .538-.214 1.055-.595 1.436L4 17h5m6 0v1a3 3 0 11-6 0v-1m6 0H9"
                  ></path>
                </svg>
              </span>
              <span class="ml-2 text-sm tracking-wide truncate"
                >Notifications</span
              >
              <span
                class="px-2 py-0.5 ml-auto text-xs font-medium tracking-wide text-red-500 bg-red-50 rounded-full"
                >1.2k</span
              >
            </a>
          </li>
          <li class="px-5">
            <div class="flex flex-row items-center h-8">
              <div class="text-sm font-light tracking-wide text-gray-500">
                Settings
              </div>
            </div>
          </li>
          <li>
            <a
              href="#"
              class="relative flex flex-row items-center h-11 focus:outline-none hover:bg-gray-50 text-gray-600 hover:text-gray-800 border-l-4 border-transparent hover:border-indigo-500 pr-6"
            >
              <span class="inline-flex justify-center items-center ml-4">
                <svg
                  class="w-5 h-5"
                  fill="none"
                  stroke="currentColor"
                  viewBox="0 0 24 24"
                  xmlns="http://www.w3.org/2000/svg"
                >
                  <path
                    stroke-linecap="round"
                    stroke-linejoin="round"
                    stroke-width="2"
                    d="M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"
                  ></path>
                </svg>
              </span>
              <span class="ml-2 text-sm tracking-wide truncate">Profile</span>
            </a>
          </li>
          <li>
            <a
              href="#"
              class="relative flex flex-row items-center h-11 focus:outline-none hover:bg-gray-50 text-gray-600 hover:text-gray-800 border-l-4 border-transparent hover:border-indigo-500 pr-6"
            >
              <span class="inline-flex justify-center items-center ml-4">
                <svg
                  class="w-5 h-5"
                  fill="none"
                  stroke="currentColor"
                  viewBox="0 0 24 24"
                  xmlns="http://www.w3.org/2000/svg"
                >
                  <path
                    stroke-linecap="round"
                    stroke-linejoin="round"
                    stroke-width="2"
                    d="M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z"
                  ></path>
                  <path
                    stroke-linecap="round"
                    stroke-linejoin="round"
                    stroke-width="2"
                    d="M15 12a3 3 0 11-6 0 3 3 0 016 0z"
                  ></path>
                </svg>
              </span>
              <span class="ml-2 text-sm tracking-wide truncate">Settings</span>
            </a>
          </li>
          <li>
            <a
              href="#"
              class="relative flex flex-row items-center h-11 focus:outline-none hover:bg-gray-50 text-gray-600 hover:text-gray-800 border-l-4 border-transparent hover:border-indigo-500 pr-6"
            >
              <span class="inline-flex justify-center items-center ml-4">
                <svg
                  class="w-5 h-5"
                  fill="none"
                  stroke="currentColor"
                  viewBox="0 0 24 24"
                  xmlns="http://www.w3.org/2000/svg"
                >
                  <path
                    stroke-linecap="round"
                    stroke-linejoin="round"
                    stroke-width="2"
                    d="M17 16l4-4m0 0l-4-4m4 4H7m6 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h4a3 3 0 013 3v1"
                  ></path>
                </svg>
              </span>
              <span class="ml-2 text-sm tracking-wide truncate">Logout</span>
            </a>
          </li>
        </ul>
      </div>
    </ng-template>
  </p-sidebar>
</div>

<!-- Shopping Cart Modal -->
<p-dialog
  header="Your Shopping Cart"
  [(visible)]="visible"
  [modal]="true"
  [style]="{ width: '40vw', 'max-height': '100vh', 'overflow-y': 'scroll' }"
  [draggable]="false"
  [resizable]="false"
  position="topright"
>
  <ng-container *ngIf="shoppingCartProducts.length > 0; else empty">
    <div
      class="flex w-full h-48 pl-0 items-center justify-between gap-4 border border-gray-200 shadow-sm"
      *ngFor="let product of shoppingCartProducts"
    >
      <img
        src="{{ product.image1 }}"
        alt="Product{} thumbnail in Shopping cart"
        width="90"
        height="90"
        class="rounded-lg bg-white"
      />
      <div class="flex flex-col h-full items-start justify-center gap-2">
        <h2 class="w-56 font-geist-bold text-base line-height-4">
          {{ product.name }}
        </h2>
        <span class="w-56 font-geist text-base line-height-4 text-gray-500"
          >{{ product.description.substring(0, 50) }}...</span
        >
        <div class="flex flex-col">
          <label for="horizontal">Horizontal with Step</label>
          <p-inputNumber
            [(ngModel)]="product.amount"
            [showButtons]="true"
            buttonLayout="horizontal"
            inputId="horizontal"
            spinnerMode="horizontal"
            [step]="1"
            incrementButtonIcon="pi pi-plus"
            decrementButtonIcon="pi pi-minus"
            [min]="0"
            [max]="100"
            class="w-9"
          >
          </p-inputNumber>
        </div>
      </div>
      <div class="flex flex-col justify-around items-center h-full pr-2">
        <button class="cursor-pointer" (click)="deleteProduct(0)">
          <li class="pi pi-times"></li>
        </button>
        <span class="font-geist-bold">{{
          product.price | currency : "USD"
        }}</span>
      </div>
    </div>
    <button
      class="w-full px-2 py-4 text-sm font-bold leading-none text-white md:w-24 rounded-lg focus:ring-1 focus:ring-white bg-sunsetOrange-200 mt-2"
      routerLink="cart"
      (click)="visible = false"
    >
      Go to cart
    </button>
  </ng-container>

  <ng-template #empty>
    <p class="mt-2 text-sunsetOrange-200">
      You don't have any product in your cart
    </p>              
  </ng-template>
</p-dialog>

<!-- Login Modal -->
<p-dialog
  header="Welcome"
  [(visible)]="loginVisible"
  [modal]="true"
  [style]="{
    width: '40vw',
    overflow: 'hidden',
    padding: '10px',
    height: 'auto'
  }"
  [draggable]="false"
  [resizable]="false"  
  [breakpoints]="{ '960px': '75vw' }"
>
  <div class="flex items-center justify-center w-full lg:p-0">
    <div class="flex items-center">
      <form
        [formGroup]="credentials"
        (ngSubmit)="submit()"
        class="flex flex-col w-full h-full p-6 text-center bg-white rounded-3xl"
      >
        <h3 class="mb-3 text-4xl font-extrabold text-dark-grey-900">Sign In</h3>
        <p class="mb-4 text-grey-700">Enter your email and password</p>
        <label for="email" class="mb-2 text-sm text-start text-grey-900"
          >Email*</label
        >
        <input
          id="email"
          type="email"
          placeholder="mail@loopple.com"
          class="flex items-center w-full px-5 py-4 mr-2 text-sm font-medium outline-none mb-7 placeholder:text-grey-700 text-black rounded-2xl border-2 border-gray-400 focus:border-sunsetOrange-200"
          formControlName="email"
        />
        <label for="password" class="mb-2 text-sm text-start text-grey-900"
          >Password*</label
        >
        <input
          id="password"
          type="password"
          placeholder="Enter a password"
          class="flex items-center w-full px-5 py-4 mb-5 mr-2 text-sm font-medium outline-none placeholder:text-grey-700 text-dark-grey-900 rounded-2xl border-2 border-gray-400 focus:border-sunsetOrange-200"
          formControlName="password"
        />

        <button
          class="w-full px-6 py-5 mb-5 text-sm font-bold leading-none text-white transition duration-300 md:w-96 rounded-2xl hover:bg-purple-blue-600 focus:ring-1 focus:ring-white bg-sunsetOrange-200"
          type="submit"
        >
          Sign In
        </button>
        <p class="text-sm leading-relaxed text-grey-900">
          Not registered yet?
          <a href="javascript:void(0)" class="font-bold text-grey-700"
            >Create an Account</a
          >
        </p>
      </form>
    </div>
  </div>
</p-dialog>

<!-- Liked Products Modal -->

<p-dialog
  header="Wishlist"
  [(visible)]="likedVisible"
  [modal]="true"
  [style]="{ width: '40vw', 'max-height': '100vh', 'overflow-y': 'scroll' }"
  [draggable]="false"
  [resizable]="false"
  position="topright"
>
  <ng-container *ngIf="likedProducts.length > 0; else empty">
    <div
      class="flex w-full h-48 pl-0 items-center justify-between gap-4 border border-gray-200 shadow-sm"
      *ngFor="let product of likedProducts"
    >
      <img
        src="{{ product.image1 }}"
        alt="Product{} thumbnail in Shopping cart"
        width="90"
        height="90"
        class="rounded-lg bg-white"
      />
      <div class="flex flex-col h-full items-start justify-center gap-2">
        <h2 class="w-56 font-geist-bold text-base line-height-4">
          {{ product.name }}
        </h2>
        <span class="w-56 font-geist text-base line-height-4 text-gray-500"
          >{{ product.description.substring(0, 50) }}...</span
        >        
      </div>
      <div class="flex flex-col justify-around items-center h-full pr-2">
        <button class="cursor-pointer" (click)="deleteProduct(0)">
          <li class="pi pi-times"></li>
        </button>
        <span class="font-geist-bold">{{
          product.price | currency : "USD"
        }}</span>
      </div>
    </div>    
  </ng-container>

  <ng-template #empty>
    <p class="mt-2 text-sunsetOrange-200">
      You don't have any product in your cart
    </p>              
  </ng-template>
</p-dialog>

<p-menu #menu [model]="menuItems" [popup]="true"></p-menu>
<style>
  ::ng-deep .p-inputnumber-input {
    width: 40px;
    height: 30px;
    text-align: center;
  }

  ::ng-deep .p-dialog {
    border-radius: 8px;
  }
</style>
